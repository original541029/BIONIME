{"version":3,"sources":["site-add.js"],"names":["window","onload","addEvent","table","$","keyup","event","keyCode","verification","blank","tempObj","name","val","date","CreateData","newDate","data","push","localStorage","pNotify","document","querySelectorAll","PNotify","title","JSON","parse","getItem","nurseData","remove","aryHead","strThead","combinationElm","elmLoop","objKeyData","Object","keys","dataLen","length","objKeyLen","strTbody","nestedLoops","thead","createElement","tbody","setAttribute","tableArea","querySelector","innerHTML","appendChild","removeRow","click","e","num","target","dataset","splice","setItem","stringify","nurseView","elmSiteName","value","siteNameArea","ary","i","j","siteName","console","log","modal","obj","objLen","k","modalBody"],"mappings":"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","sourcesContent":["window.onload = function () {\r\n  addEvent();\r\n  table();\r\n}\r\n\r\nfunction addEvent() {\r\n  // $('.site-add-btn').click(() => {\r\n  //   verification.blank('input', [`數入站點名稱`])\r\n  //   let tempObj = {\r\n  //     name: $('.input').val(),\r\n  //     date: CreateData.newDate()\r\n  //   }\r\n  //   data.push(tempObj)\r\n  //   CreateData.localStorage('siteList', data, '.input');\r\n  // })\r\n  $('.input-add').keyup(() => {\r\n    if (event.keyCode === 13) {\r\n      verification.blank('.input-add', [`輸入站點名稱`])\r\n      let tempObj = {\r\n        name: $('.input-add').val(),\r\n        date: CreateData.newDate()\r\n      }\r\n      data.push(tempObj)\r\n      CreateData.localStorage('siteList', data, '.input');\r\n      table();\r\n      let pNotify = document.querySelectorAll('.ui-pnotify')\r\n      if (pNotify[0]) {\r\n        return\r\n      }\r\n \r\n      new PNotify({\r\n        title: `新增成功`\r\n      });\r\n    \r\n    }\r\n  });\r\n}\r\n\r\n\r\n// ----------------------------------------------\r\n\r\nlet data = JSON.parse(localStorage.getItem(\"siteList\")) || null;\r\nlet nurseData = JSON.parse(localStorage.getItem(\"nurseList\")) || null;\r\n\r\nfunction table() {\r\n  $('.table').remove();\r\n  if (data == null) {\r\n    return\r\n  }\r\n  let aryHead = ['站點', '修改時間', '動作'];\r\n  let strThead = combinationElm.elmLoop(aryHead, 'tr', 'th');\r\n\r\n  let objKeyData = Object.keys(data[0])\r\n  let dataLen = data.length;\r\n  let objKeyLen = objKeyData.length + 1;\r\n\r\n  let strTbody = '';\r\n  strTbody += combinationElm.nestedLoops(data, objKeyData, dataLen, objKeyLen, strTbody)\r\n\r\n  let thead = document.createElement('thead');\r\n  let tbody = document.createElement('tbody');\r\n  let table = document.createElement('table');\r\n  table.setAttribute('class', 'table')\r\n  let tableArea = document.querySelector('.table-area');\r\n  thead.innerHTML = strThead;\r\n  tbody.innerHTML = strTbody;\r\n  table.appendChild(thead);\r\n  table.appendChild(tbody);\r\n  tableArea.appendChild(table);\r\n  if ($('.delete').length != 0) {\r\n    removeRow();\r\n  }\r\n}\r\n\r\nfunction removeRow() {\r\n  $('.delete').click((e) => {\r\n    var num = e.target.dataset.num;\r\n    data.splice(num, 1);\r\n    localStorage.setItem(\"siteList\", JSON.stringify(data));\r\n    table();\r\n  })\r\n}\r\n\r\nfunction nurseView(name) {\r\n  $('.model-table').remove();\r\n  $('.site-name').remove();\r\n  let elmSiteName = document.createElement('input');\r\n  elmSiteName.setAttribute('class', 'site-name');\r\n  elmSiteName.setAttribute('type', 'text');\r\n  elmSiteName.setAttribute('disabled', 'disabled');\r\n  elmSiteName.value = name;\r\n  let siteNameArea = document.querySelector('.site-name-area');\r\n  siteNameArea.appendChild(elmSiteName);\r\n  if (nurseData == null) {\r\n    return\r\n  }\r\n  let ary = ['員工編號', '加入時間']\r\n  let strThead = combinationElm.elmLoop(ary, 'tr', 'th');\r\n  let objKeyData = Object.keys(nurseData[0])\r\n  const dataLen = nurseData.length;\r\n  const objKeyLen = objKeyData.length;\r\n\r\n  let strTbody = `<tr>`;\r\n  for (let i = 0; i < dataLen; i++) {\r\n\r\n    for (let j = 0; j < objKeyLen; j++) {\r\n\r\n      if (j == 2) {\r\n      \r\n        let siteName = nurseData[i][objKeyData[0]];\r\n        if (siteName == name) {\r\n          console.log(siteName)\r\n          console.log(i)\r\n          $('#myModal').modal('show')\r\n \r\n          let obj = Object.keys(nurseData[i][objKeyData[j]]);\r\n          const objLen = obj.length;\r\n          for (let k = 0; k < objLen; k++) {\r\n            if (k != 1) {\r\n              strTbody += `<td>${nurseData[i][objKeyData[j]][obj[k]]}</td>`\r\n            }\r\n          }\r\n          strTbody += '</tr>'\r\n        }else{\r\n          let pNotify = document.querySelectorAll('.ui-pnotify')\r\n          if (pNotify[0]) {\r\n            return\r\n          }\r\n     \r\n          new PNotify({\r\n            title: `無員工資料`\r\n          });\r\n        }\r\n  \r\n      }\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n  let thead = document.createElement('thead');\r\n  let tbody = document.createElement('tbody');\r\n  let table = document.createElement('table');\r\n  table.setAttribute('class', 'table model-table')\r\n  thead.innerHTML = strThead;\r\n  tbody.innerHTML = strTbody;\r\n  table.appendChild(thead);\r\n  table.appendChild(tbody);\r\n  let modalBody = document.querySelector('.modal-body');\r\n  modalBody.appendChild(table)\r\n}"],"file":"site-add.js"}