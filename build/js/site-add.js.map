{"version":3,"sources":["site-add.js"],"names":["window","onload","addEvent","table","$","click","val","pNotify","document","querySelectorAll","PNotify","title","tempObj","name","date","CreateData","newDate","data","push","localStorage","keyup","event","keyCode","JSON","parse","getItem","nurseData","remove","aryHead","strThead","combinationElm","elmLoop","objKeyData","Object","keys","dataLen","length","objKeyLen","strTbody","nestedLoops","thead","createElement","setAttribute","tbody","tableArea","querySelector","innerHTML","appendChild","removeRow","e","num","target","dataset","splice","setItem","stringify","nurseView","ary","i","j","siteName","console","log","modal","obj","objLen","k","modalBody"],"mappings":"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","sourcesContent":["window.onload = function () {\r\n  addEvent();\r\n  table();\r\n}\r\n\r\nfunction addEvent() {\r\n  $('.site-add-btn').click(() => {\r\n    if($('.input-add').val()==\"\"){\r\n      let pNotify = document.querySelectorAll('.ui-pnotify')\r\n      if (pNotify[0]) {\r\n        return\r\n      }\r\n      new PNotify({\r\n        title: `輸入站點名稱`\r\n      });\r\n      return\r\n    }\r\n    let tempObj = {\r\n      name: $('.input-add').val(),\r\n      date: CreateData.newDate()\r\n    }\r\n    data.push(tempObj)\r\n    CreateData.localStorage('siteList', data, '.input');\r\n    table();\r\n    let pNotify = document.querySelectorAll('.ui-pnotify')\r\n    if (pNotify[0]) {\r\n      return\r\n    }\r\n\r\n    new PNotify({\r\n      title: `新增成功`\r\n    });\r\n    $('.input-add').val('')\r\n  })\r\n  $('.input-add').keyup(() => {\r\n    if (event.keyCode === 13) {\r\n      if($('.input-add').val()==\"\"){\r\n        let pNotify = document.querySelectorAll('.ui-pnotify')\r\n        if (pNotify[0]) {\r\n          return\r\n        }\r\n        new PNotify({\r\n          title: `輸入站點名稱`\r\n        });\r\n        return\r\n      }\r\n      let tempObj = {\r\n        name: $('.input-add').val(),\r\n        date: CreateData.newDate()\r\n      }\r\n      data.push(tempObj)\r\n      CreateData.localStorage('siteList', data, '.input');\r\n      table();\r\n      let pNotify = document.querySelectorAll('.ui-pnotify')\r\n      if (pNotify[0]) {\r\n        return\r\n      }\r\n \r\n      new PNotify({\r\n        title: `新增成功`\r\n      });\r\n      $('.input-add').val('')\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// ----------------------------------------------\r\n\r\nlet data = JSON.parse(localStorage.getItem(\"siteList\")) || [];\r\nlet nurseData = JSON.parse(localStorage.getItem(\"nurseList\")) || [];\r\n\r\nfunction table() {\r\n  $('.table').remove();\r\n  if (data == []) {\r\n    return\r\n  }\r\n  let aryHead = ['站點', '修改時間', '動作'];\r\n  let strThead = combinationElm.elmLoop(aryHead, 'tr', 'th');\r\n\r\n  let objKeyData = Object.keys(data[0])\r\n  let dataLen = data.length;\r\n  let objKeyLen = objKeyData.length + 1;\r\n\r\n  let strTbody = '';\r\n  strTbody += combinationElm.nestedLoops(data, objKeyData, dataLen, objKeyLen, strTbody)\r\n\r\n  let thead = document.createElement('thead');\r\n  thead.setAttribute('class','bg-light-orange')\r\n  let tbody = document.createElement('tbody');\r\n  let table = document.createElement('table');\r\n  table.setAttribute('class', 'table table-condensed w-38 border-orange')\r\n  let tableArea = document.querySelector('.table-area');\r\n  thead.innerHTML = strThead;\r\n  tbody.innerHTML = strTbody;\r\n  table.appendChild(thead);\r\n  table.appendChild(tbody);\r\n  tableArea.appendChild(table);\r\n  if ($('.delete').length != 0) {\r\n    removeRow();\r\n  }\r\n}\r\n\r\nfunction removeRow() {\r\n  $('.delete').click((e) => {\r\n    var num = e.target.dataset.num;\r\n    data.splice(num, 1);\r\n    localStorage.setItem(\"siteList\", JSON.stringify(data));\r\n    table();\r\n  })\r\n}\r\n\r\nfunction nurseView(name) {\r\n  $('.model-table').remove();\r\n  if (nurseData == []) {\r\n    return\r\n  }\r\n\r\n  let ary = ['站點名稱','員工編號', '加入時間']\r\n  let strThead = combinationElm.elmLoop(ary, 'tr', 'th');\r\n  let objKeyData = Object.keys(nurseData[0])\r\n  const dataLen = nurseData.length;\r\n  const objKeyLen = objKeyData.length;\r\n\r\n  let strTbody = `<tr>`;\r\n  strTbody+=`<td>${name}</td>`\r\n  for (let i = 0; i < dataLen; i++) {\r\n\r\n    for (let j = 0; j < objKeyLen; j++) {\r\n\r\n      if (j == 2) {\r\n      \r\n        let siteName = nurseData[i][objKeyData[0]];\r\n        if (siteName == name) {\r\n          console.log(siteName)\r\n          console.log(i)\r\n          $('#myModal').modal('show')\r\n \r\n          let obj = Object.keys(nurseData[i][objKeyData[j]]);\r\n          const objLen = obj.length;\r\n          for (let k = 0; k < objLen; k++) {\r\n\r\n            if (k != 1) {\r\n              console.log(nurseData)\r\n              strTbody += `<td>${nurseData[i][objKeyData[j]][obj[k]]}</td>`\r\n            }\r\n          }\r\n          strTbody += '</tr>'\r\n        }else{\r\n          let pNotify = document.querySelectorAll('.ui-pnotify')\r\n          if (pNotify[0]) {\r\n            return\r\n          }\r\n     \r\n          new PNotify({\r\n            title: `無員工資料`\r\n          });\r\n        }\r\n  \r\n      }\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n  let thead = document.createElement('thead');\r\n  let tbody = document.createElement('tbody');\r\n  tbody.setAttribute('class', 'model-tbody')\r\n  let table = document.createElement('table');\r\n  table.setAttribute('class', 'table model-table')\r\n  thead.innerHTML = strThead;\r\n  thead.setAttribute('class', 'model-thead')\r\n  tbody.innerHTML = strTbody;\r\n  table.appendChild(thead);\r\n  table.appendChild(tbody);\r\n  let modalBody = document.querySelector('.modal-body');\r\n  modalBody.appendChild(table)\r\n}"],"file":"site-add.js"}