{"version":3,"sources":["nurse-list.js"],"names":["window","onload","table","nurseData","JSON","parse","localStorage","getItem","$","remove","ary","strThead","combinationElm","elmLoop","objKeyData","Object","keys","console","log","dataLen","length","objKeyLen","strTbody","i","j","obj","objLen","k","tempObj","stringify","replace","thead","document","createElement","tbody","setAttribute","tableArea","querySelector","innerHTML","appendChild","removeRow","click","e","num","target","dataset","splice","setItem","nurseView","modal","val","data","objKeyDataLen","strAdd","ForLoops","selectArea","str","addSelectArea","removeSelectArea","selectGroup","addBtn","innerText","removeBtn","ActEvent","clickBtn","addEvent","dataNurse","initData","text","CreateData","newDate","pNotify","querySelectorAll","PNotify","title"],"mappings":"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","sourcesContent":["window.onload = function () {\r\n  table();\r\n\r\n}\r\n\r\n\r\n\r\n\r\nfunction table() {\r\n  let nurseData = JSON.parse(localStorage.getItem(\"nurseList\")) || null;\r\n  $('.table').remove();\r\n  if (nurseData == null) {\r\n    return\r\n  }\r\n  let ary = ['員工編號', '修改時間', '動作']\r\n  let strThead = combinationElm.elmLoop(ary, 'tr', 'th');\r\n  let objKeyData = Object.keys(nurseData[0])\r\n  console.log(objKeyData)\r\n  const dataLen = nurseData.length;\r\n  const objKeyLen = objKeyData.length;\r\n  console.log(nurseData)\r\n  let strTbody = `<tr>`;\r\n  for (let i = 0; i < dataLen; i++) {\r\n    for (let j = 0; j < objKeyLen; j++) {\r\n      if (j == 2) {\r\n\r\n        let obj = Object.keys(nurseData[i][objKeyData[j]]);\r\n        console.log(obj)\r\n        const objLen = obj.length + 1;\r\n\r\n        for (let k = 0; k < objLen; k++) {\r\n          if (k != 1) {\r\n            if (k == 3) {\r\n              let tempObj = {\r\n                \"員工編號\": nurseData[i][objKeyData[j]][\"員工編號\"],\r\n                \"護士姓名\": nurseData[i][objKeyData[j]][\"護士姓名\"],\r\n                \"siteName\": nurseData[i][\"name\"],\r\n                \"placeNum\": i\r\n              }\r\n              let obj = JSON.stringify(tempObj).replace(/\\\"/g, \"'\");\r\n              strTbody += `<td class=\"d-flex\"><div onclick=\"nurseView(${obj})\" class=\"model-btn mr-2 cursor-potion\"><i class=\"fas fa-users\"></div></i><div class=\"cursor-potion text-danger delete\" data-num=\"${i}\">X</div></td>`\r\n\r\n            } else {\r\n\r\n              strTbody += `<td>${nurseData[i][objKeyData[j]][obj[k]]}</td>`\r\n            }\r\n\r\n          }\r\n\r\n        }\r\n        strTbody += '</tr>'\r\n      }\r\n\r\n\r\n\r\n    }\r\n  }\r\n\r\n\r\n  let thead = document.createElement('thead');\r\n  let tbody = document.createElement('tbody');\r\n  let table = document.createElement('table');\r\n  table.setAttribute('class', 'table')\r\n  let tableArea = document.querySelector('.table-area');\r\n  thead.innerHTML = strThead;\r\n  tbody.innerHTML = strTbody;\r\n  table.appendChild(thead);\r\n  table.appendChild(tbody);\r\n  tableArea.appendChild(table);\r\n  if ($('.delete').length != 0) {\r\n    removeRow();\r\n  }\r\n}\r\n\r\nfunction removeRow() {\r\n  let nurseData = JSON.parse(localStorage.getItem(\"nurseList\")) || null;\r\n  $('.delete').click((e) => {\r\n    var num = e.target.dataset.num;\r\n    nurseData.splice(num, 1);\r\n    localStorage.setItem(\"nurseList\", JSON.stringify(nurseData));\r\n    table();\r\n  })\r\n}\r\n\r\nfunction nurseView(obj) {\r\n  $('.remove-select-area').remove();\r\n  $('.add-select-area').remove();\r\n  $('.add-btn').remove();\r\n  $('.remove-btn').remove();\r\n  console.log(obj[\"siteName\"])\r\n  $('#myModal').modal('show')\r\n  $('.number').val(obj[\"員工編號\"])\r\n  $('.nurse-name').val(obj[\"護士姓名\"])\r\n  let data = JSON.parse(localStorage.getItem(\"siteList\")) || null;\r\n  if (data == null) {\r\n    return\r\n  }\r\n  let objKeyData = Object.keys(data[0])\r\n  let dataLen = data.length;\r\n  let objKeyDataLen = objKeyData.length;\r\n  let strAdd = ``;\r\n  strAdd += ForLoops.selectArea(data, objKeyData, dataLen, objKeyDataLen, str, obj[\"siteName\"], 'add')\r\n  let str = ``;\r\n  str += ForLoops.selectArea(data, objKeyData, dataLen, objKeyDataLen, str, obj[\"siteName\"], 'remove')\r\n  let addSelectArea = document.createElement('select');\r\n  addSelectArea.setAttribute('class', 'add-select-area w-8')\r\n  addSelectArea.setAttribute('size', '8')\r\n  addSelectArea.innerHTML += strAdd;\r\n  let removeSelectArea = document.createElement('select');\r\n  removeSelectArea.setAttribute('class', 'remove-select-area w-8')\r\n  removeSelectArea.setAttribute('size', '8')\r\n  removeSelectArea.innerHTML += str;\r\n  let selectGroup = document.querySelector('.select-group');\r\n  let addBtn = document.createElement('button');\r\n  addBtn.setAttribute('type', 'button');\r\n  addBtn.setAttribute('class', \"btn btn-primary add-btn\");\r\n  addBtn.innerText = '加入';\r\n  let removeBtn = document.createElement('button');\r\n  removeBtn.setAttribute('type', 'button');\r\n  removeBtn.innerText = '移除';\r\n  removeBtn.setAttribute('class', \"btn btn-primary remove-btn\");\r\n  selectGroup.appendChild(addSelectArea);\r\n  selectGroup.appendChild(addBtn);\r\n  selectGroup.appendChild(removeBtn);\r\n  selectGroup.appendChild(removeSelectArea);\r\n  ActEvent.clickBtn('.add-btn', '.add-select-area', '.remove-select-area', '.remove-select-area > option')\r\n  ActEvent.clickBtn('.remove-btn', '.remove-select-area', '.add-select-area', '.add-select-area > option')\r\n\r\n  addEvent(obj[\"placeNum\"]);\r\n}\r\n\r\nfunction addEvent(num) {\r\n  console.log(num)\r\n  let dataNurse = JSON.parse(localStorage.getItem(\"nurseList\")) || [];\r\n  $('.save-btn').click(() => {\r\n    let initData = dataNurse[num][\"name\"];\r\n    dataNurse[num][\"name\"] = $('.add-select-area>option').text()\r\n    dataNurse[num][\"員工\"][\"加入時間\"] = CreateData.newDate();\r\n    localStorage.setItem(\"nurseList\", JSON.stringify(dataNurse));\r\n    table();\r\n\r\n    let pNotify = document.querySelectorAll('.ui-pnotify')\r\n    if (pNotify[0]||initData == $('.add-select-area>option').text()) {\r\n      return\r\n    } else {\r\n      new PNotify({\r\n        title: `修改成功`\r\n      });\r\n      return\r\n    }\r\n  })\r\n}"],"file":"nurse-list.js"}